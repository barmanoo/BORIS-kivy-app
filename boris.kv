#: import main main
#: import ListAdapter kivy.adapters.listadapter.ListAdapter


BorisRoot:

<BorisRoot>:
    StartPageForm

<StartPageForm>:
    orientation: "vertical"
    Image:
        source: "logo_boris_500px.png"
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Button:
            text: "Download project"
            size_hint_x: 0.4
            on_press: root.show_DownloadProject()

        Button:
            text: "Open project"
            size_hint_x: 0.4
            on_press: root.show_SelectProjectForm()
#        Button:
#            text: "View project"
#            size_hint_x: 0.4
#            on_press: root.show_SelectProjectView()
        Button:
            text: "Exit"
            size_hint_x: 0.2
            on_press: root.exit()

<DownloadProjectForm>
    orientation: "vertical"
    url_input: url
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Label:
            text: "URL"
        TextInput:
            id: url
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Button:
            text: "Cancel"
            size_hint_x: 0.2
            on_press: root.cancel()
        Button:
            text: "Download project"
            size_hint_x: 0.8
            on_press: root.download_project()

#<SelectProjectView>
#    orientation: "vertical"
#    FileChooserListView:
#        id: filechooser
#        path: "."
#        filters: ["*.boris"]
#    BoxLayout:
#        height: "40dp"
#        size_hint_y: None
#        Button:
#            text: "Cancel"
#            size_hint_x: 0.2
#            on_press: root.cancel()
#        Button:
#            text: "View project"
#            size_hint_x: 0.8
#            on_press: root.view_project(filechooser.selection)

<ViewProjectForm>
    orientation: "vertical"
    halign: 'left'
    Label:
        id: lbl
        height: "40dp"
        size_hint_y: None
        text: "View project!"
    ListView:
        id: projectslist
        item_strings: []
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Button:
            id: btnGoBack
            text: "Go back"
            size_hint_x: 0.2
            on_press: root.go_back()
        Button:
            id: btnStartObs
            text: "New observation"
            size_hint_x: 0.2
            on_press: root.new_observation()


<SelectProjectForm>
    orientation: "vertical"
    Label:
        height: "40dp"
        size_hint_y: None
        text: "Select a BORIS project file and then press \"Open project\" button"
    FileChooserListView:
        id: projectfilechooser
        path: "."
        filters: ["*.boris"]
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Button:
            text: "Cancel"
            size_hint_x: 0.2
            on_press: root.cancel()
        Button:
            text: "Open project"
            size_hint_x: 0.8
            on_press: root.open_project(projectfilechooser.path, projectfilechooser.selection)

<StartObservationForm>
    orientation: "vertical"
    obsid_input: obsid
    obsdate_input: obsdate
    obsdescription_input: obsdescription
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Label:
            text: "Observation id"
        TextInput:
            id: obsid
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Label:
            text: "Observation date"
        TextInput:
            id: obsdate
    BoxLayout:
        height: "120dp"
        size_hint_y: None
        Label:
            text: "Description"
        TextInput:
            id: obsdescription
            multiline: True
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Button:
            text: "Cancel"
            size_hint_x: 0.2
            on_press: root.cancel()
        Button:
            text: "Independent var"
            size_hint_x: 0.4
            on_press: root.indep_var()
        Button:
            text: "Start observation"
            size_hint_x: 0.4
            on_press: root.start()

<ConfirmStopPopup>
    title: "Are you sure you want to stop the current observation?"
    title_size: "20sp"
    BoxLayout:
        height: "40dp"
        size_hint_y: None
        Button:
            text: "Yes"
            size_hint_x: 0.5
            on_press: root.yes()
        Button:
            text: "No"
            size_hint_x: 0.5
            on_press: root.no()

